# 「S3の深淵を知るためにAmazonの奥地へ行った」を読んだ

「[S3の深淵を知るためにAmazonの奥地へ行った](https://takuros.booth.pm/items/7634590)」を読んだので、感想を書いてみる。

AWSについて学びたいと思ったとき、AWSが提供する膨大な数のサービスを前にどこから学んでいけば良いのかわからず圧倒されたことはないだろうか。
そんな経験がある方にはこの本をおすすめしたい。そのこころをこれから説明差し上げよう。

&nbsp;

AWSをどこから学べばいいのかという苦悩に対しては明確な処方箋がある。

**IAM, S3, EC2, VPC, ENIなどの基礎コンポーネントを深く理解することに集中せよ**というものである。AWSには様々なサービスがあるが、そのほとんどは上述の基礎コンポーネントを組み合わせたものか、その基礎コンポーネントの亜種として理解できる。

&nbsp;

基礎コンポーネント群ついて深く理解したいと思ったとき、公式ドキュメントは最初に読むべきものである。
とはいえ、みなさんがお感じの通り、公式ドキュメントは読みやすさに欠ける上に、ものすごく分量が多い。

一方では、運用における実践的なノウハウやサービス間の関係性について十分に記述されていないことがあり、それらに関しては玉石混交のインターネットを掻き分けながら信頼できるテックブログ等を探しにいく必要がある。


&nbsp;

公式ドキュメントではユーザが実現したいことを迅速に実現できるようにシンプルなインターフェースとして説明されるべきだ、APIの仕様について網羅的に正確に記すべきだ、という考えがベースにあるのだと思う。それに関しては、当然だと思うのだが、少し残念な結果として、AWSの内部構造は隠蔽されるか、ちょろっと一文だけで記されていたりする。
とはいえ、**どんな技術でもそれを深く理解するためには、その一歩下のレイヤーや、APIの裏にある内部構造に思いを馳せる必要がある。**

公式ドキュメントの貴重な一文からどれだけ想像力を働かせてきたことか。

&nbsp;

そこで、公式ドキュメントを理解する際の補助資料として手に取ってほしいのが本書である。

本書ではAWSのドキュメントが噛み砕かれ、読みやすくなっている。また実践的なノウハウと、他サービスとの関係性についてもAWSの内部構造を根拠として記述されている。

例として、本書において私が良いと思った内容を少しだけ紹介する。

- S3 Objectに与えるキーは"/"で区切ることでディレクトリ構造のように表現できるが、物理的にはキーバリューのフラットな構造でしかない。ただ、内部的にはプレフィックスを基準にデータが配置されており、特定のプレフィックスにデータ量が偏っていた場合に性能に影響するケースもある。 
- 分析や集計に使われる生データとしてのS3 Objectに関して。データ量の小さなオブジェクトが多数存在していると、分析系サービスからS3へのリクエスト数が多くなりリクエスト数に比例して料金が跳ねる。一方、オブジェクトのデータ量が大きくなりすぎても、並列処理の恩恵が薄れたり、処理のリトライコストが高くなる。良いバランスとして、1オブジェクトあたり100~250MBという具体的な目安が提案されている。

&nbsp;

AWSをさわっている時に浮かんでくる素朴な疑問が取り上げられているのもお勧めポイントだ。

例として本書では以下の疑問に対して著者なりのアンサーが記されていた。

- VPC内部からInternet Gatewayを介してS3 Bucketにアクセスする時、そのリクエストはAWS Cloudの外にはでないとはどういうことなのか？
- S3は3重に冗長化されているのになぜバックアップが必要なのか

知的好奇心がある方にとっては、読んでいて楽しいと感じる内容だと思う。

&nbsp;

このような一歩踏み込んだ話まで載っているのに、全体としての分量はコンパクトで数時間で読破できてしまうのは著者の力量によるところであろう。

本書をはじめとする"AWSの薄い本シリーズ"は、その意味で、AWSについて深く理解したいと志向する人たちにとって貴重な存在となっているのだと思う。

あなたがAWSについて深く理解したいと思っていて、もしこのシリーズの本を読んだことない場合は、まず一冊手に取ってみてほしい。

[S3の深淵を知るためにAmazonの奥地へ行った](https://takuros.booth.pm/items/7634590)
