# エンタープライズ向けにSaaSを提供するということ

一口にソフトウェアサービスの提供といっても、一般顧客向けのサービスを提供することと、事業者向けのサービスを提供することは多くの点で異なる。

中小事業者向けにサービスを提供するのと、エンタープライズ向けにサービスを提供するのとでは、これもまた多くの点で異なる。

特定のエンタープライズ向けに業務アプリケーションを提供するのと、汎用ソリューションとしてSaaSを提供するのとでは、また異なる。

私は現在勤める会社でソフトウェアエンジニア+プロダクトマネージャーとしてエンタープライズ向けのSaaSを立ち上げるという経験をした。

今回は、私の経験を元に、エンタープライズ向けに業務アプリケーションをSaaSという形態で提供することの特異性について書いてみようと思う。

今回はプロダクト開発一般に限った内容にする。Enterprise readyな技術要件やGo to marketについてはまた別途書きたいと考えている。

## 個別要件への向き合い方

エンタープライズが業務アプリケーションに求める要件は多い。

その中には、汎用的な要件もあれば、特定のお客様しか要求しない特殊な要件もある。
後者の中には、特定顧客の特定部門でしか要求されない超特殊な要件もある。

エンタープライズ向けに業務アプリケーションを提供するにあたっては、それが運用に必須な要件であれば特殊であろうがタチが悪かろうが切り捨ててはいけない、というのが私にとって最も重要な学びであった。

その学びの背景を理解するために、まずはお客様の視点に立って考えてみてほしい。お客様にとっては、この業務アプリケーションにおいて自分たちの業務が成立するか否かが強い関心事である。業務を成立させるために必要な要件は、濃淡なく、等しく必要な要件である。そのうちたった一つが欠けても、業務は成立しないのでその業務アプリケーションを使うことはできない。

そして、彼ら彼女らにとって他のお客様の要件は関心の外にある。
他のお客様の要件も合わせて満たそうとするのは、ベンダー側の都合である。

次はベンダー側の視点で考えてみよう。

エンタープライズであれば、必ず個別性の高い必須要件を持っている。
あとで詳しく説明するが、個別性こそがエンタープライズをエンタープライズ足らしめている理由である。
エンタープライズを相手にサービスを提供したことがある方なら頷いてくれると思うが、必須要件が全て汎用的な範囲に収まるようなお客様を見つけるのは非常に難しい。

そして、前述の通り、必須要件を実装しない限り、業務は成立しないのでお客様に使ってもらうことはできない。結果として、プロダクトチームが学びを得られないので、プロダクト開発ひいては事業が前に進まない。

以上の背景から、サービス立ち上げ初期であれば、個別性の高い必須要件もなんとかサービスに組み込む必要がある。

特殊な要件をいかに汎用的な機能に昇華するかはサービス設計者の腕のみせどころである。
究極的にはカスタムエンティティ定義やカスタムワークフローを備えた柔軟なサービス基盤があれば、どんな特殊要件であっても汎用的に満たせる。しかし、サービス立ち上げ時にそんな開発リソースは存在しない。また、それをゼロから作っていてはフィードバックを得るまでリードタイムが長くなってしまい本末転倒である。

場合によっては無理に汎用化せずにシンプルな個別実装で満たしてあげるのも有効な手段である。

if  (tenant_id = "XXX") then blah blah blah;というコードを書くのはソフトウェアエンジニアとしては負けた気持ちになるかもしれないが、それよりもリアルなフィードバックを最速で得られる方が価値がある。

あなたがソフトウェアエンジニアであれば早い段階で抽象化したことによってむしろ実装を複雑にしてしまった経験があるだろう。プロダクト設計のレイヤーでも同じことが起こりうる。

最初は個別に実装しておいて複数顧客の要件の重なる部分が見えてきてから抽象化することでより確実に抽象化の恩恵が得られる。

## 良いシステムが使われるのではなく、使われるシステムが結果的に良いシステムになる

前章を読んだ読者から「必須要件の実装を待たずに現状の状態でとりあえず使って貰えば早くフィードバックが得られるのではないか」という声が聞こえてきそうであるが、エンタープライズ向けの業務アプリケーションでは"とりあえず使ってもらう"は難しい。

一般顧客向けのサービスや中小企業向けの業務アプリケーションではトライアルという形でとりあえずさわってもらうという手段を取れる。

一方、エンタープライズ向けの業務アプリケーションは2つの理由でトライアルが意味を持たない。

&nbsp;

1. トライアルであってもフィードバックを得るまでに時間がかかる

トライアルとはいえども先方が要求するセキュリティ要件をクリアする必要があり、自社のインフラや機能がそれを満たしているかを判断するプロセスがある。
先方のデータを元にこちらがテナントをセットアップする必要があればNDAを交わす必要がある。

また、トライアルとはいえ社員が業務時間を費やして行うことなので、上長にトライアルに時間を使うことを説明して納得してもらう必要がある。

&nbsp;

2. トライアルでは大したフィードバックが得られない。

エンドユーザは本業で忙しい。トライアルだと本業に対して優先順位が劣後し、サービスをしっかり使ってもらえないことが多い。

仮に使ってもらえたとしてもこのサービスにフィットしそうな理想的な業務フローのみ検証され、「なんとなく使えそうな気がする」という感想が残る。

さわってもらうまでのリードタイムが長い割には、ベンダにとって重要な学びは得られない。

&nbsp;

彼ら彼女らからリアルなフィードバックを最速であるためには、結局、お金を払ってもらって契約を交わし、本流の運用に乗せてもらうのが近道だ。それが全社導入である必要はないが、限られた範囲であっても本番の業務で使ってもらう必要がある。

運用に乗せることさえできれば、その直後からエンドユーザの阿鼻叫喚と共に切実なフィードバックが寄せられるだろう。そこで寄せられるフィードバックはトライアルで得られるフィードバックの何倍もの学びをもたらしてくれる。


パトスロゴスの牧野さんがどこかで「良いシステムが使われるのではなく、使われるシステムが結果的に良いシステムになる」という話をされていたが、私の経験に照らしても間違ってはいないと感じる。

## 不自然な要件について

「不自然な要件があったときにはその要件自体を疑え、大抵の場合は別のシンプルな要件に言い換えられる」

プロダクト開発に勤しんでいる方は一度は聞いたことがある教えだと思う。

この教えはエンタープライズ向けのSaaSでも同様に有効である。あなたに不自然な要件が降りてきた際には、要件を出してきた営業やプロダクトマネージャーやお客様にヒアリングし、その要件はどのような背景から生まれるのかを理解する必要がある。

ただし、エンタープライズ向けのSaaSにおいてソフトウェアエンジニアやデザイナが感じる不自然さは、お客様にとっては自然な背景から導かれることも多い。

エンタープライズは他企業と一線を画す何らかの特殊性を持っており、それによって競争優位性を築いている。例えば、大量生産することで規模の経済を働かせて安価に物を提供したり、独自のサプライチェーンを築き在庫を最小限に抑えたり、翌日配送を徹底することで急な需要に応えたり、継続的なプロモーションによってブランドを確立していたりする。

その特殊性こそが、エンタープライズをエンタープライズたらしめている理由なのである。

その特殊性は他の企業には存在しない不自然な要件を生む。その要件は他の企業にはないものだから、汎用的な機能で満たすことはできない。

一般にプロダクト開発において汎用化することは正義だが、エンタープライズ向けのプロダクトにおいては無理に型に押し込めることで顧客の特殊性を失わせてしまうこともある。

その意味で、エンタープライズ向けに汎用的なソリューションを提供することはある種の自己矛盾を孕んでいる。

あなたが語るFit to standardがお客様の視点に立っても正しいことなのかは常に問う必要がある。

だからと言ってエンタープライズ向けのSaaSは存在し得ないというのは短絡的で、Workday、Salesforce、Veeva、Bill.comなど成功例はそれなりにある。
これらの企業は顧客ごとの特殊性と向き合い何らかの形で折り合いをつけながら汎用的なサービスとしての提供を続けている。
この矛盾を乗り越えることで、シングルソース&マルチテナントの効率性を失わずに、エンタープライズの大きなIT予算からサービス利用料をいただくことができるのである。

安易に特殊な要件を跳ね除けているといつまで経っても本番で使ってもらえず、フィードバックを得られず、矛盾を乗り越える方法がわからない。

エンタープライズ向けにSaaSを提供して事業として成立させるには、不自然な要件や自己矛盾と向き合い、それを乗り越える方法を考えよう。

## データ基盤を増やすことの意味

どんな企業でも人・物・金の整合性を取りながら帳簿を正確に記帳し営業活動を行なっていく必要が流。

例えば、すごく単純化した話として、注文数と在庫数は整合性を保たないといけない。そうでないと営業部の社員が在庫量より多くの注文を取り付けてしまい、納期に間に合わないかもしれない。

事業サイズが小さければ一つ一つのレコードを付き合わせて整合性をチェックできるかもしれないが、規模が大きくなるほど人によるチェックは現実的ではなくなる。よって、システムで確かな整合性を保証しなければならない、ということになる。

エンタープライズは人・物・金いずれの投入量も多く、それぞれの種類も様々である。つまり、整合性を取る難易度が高い。

この背景から導かれるのが、データ基盤はなるべく統一したいという顧客からの強い要請である。

データ基盤があちこちに分散して存在していると人・物・金の整合性を保つのが途端に難しくなる。
エンタープライズであれば整合性が崩れた場合の影響も甚大である。業務が止まったり訴訟されたりと事業継続性が損なわれるリスクがある。

新しいSaaSを導入するということは新しいデータ基盤を増やすということであるため、お客様からすると基本的には避けるべきことである。
そのため、既存のERPにアドオンで拡張することが安心安全な既定路線なのだが、何らかの事情により、幸運なことにあなたのSaaSの導入を検討してくれているのである。まずはそのことを理解し、忘れないようにしよう。

そして、それに報いるために責任を果たせるサービス基盤を設計しよう。

データ基盤を増やすことに対して抱かれる懸念は大きく3つである。

1. 入口と出口で整合性をとれるか
2. 整合性を取るためにこれまでにやってこなかった業務が発生するか
3. 新たな業務が発生するとしたら、その業務工数は現実的なレベルか

サービス設計者としては、データの入口と出口で外部システムとの整合性を取れることは当然のこととして、無理のない運用で整合性を保てるか、またデータ基盤を増やすリスクを凌駕する付加価値を提供できるか、という問いに真摯に向き合う必要がある。
また、強い整合性が求められるデータと、結果整合性が求められるデータと、整合性を特に気にしなくてよいデータは区別して把握する必要がある。加えて、一定期間に発生するトランザクション量や、マスタの入替周期や、各マスタ切替に伴うトランザクションとの整合性保持をどれだけシビアに考えるべきか、など考える責任がある。

最初から解像度高く把握するのは難しいが、少しずつ理解度を深めていこう。

どのデータでもとりあえずCSVインポートとCSVエクスポートを実装していれば良いというものではない。
一口にデータ連携といっても、画面での手動入力、クラウドストレージを介したファイル連携、リアルタイムAPI連携、定期バッチ取り込み/吐き出しなど様々な手段がある。
あなたのサービスで扱う各データの特性からどの連携方法が適切なのかを見極めて、最適な連携手段で実装する必要がある。場合によっては複数の手段で連携できるようにしておく必要がある。

ここで一つtipsを伝えたい。
どんなにシステム側で整合性を担保しても、サービスの外部とデータをやりとりする以上、不整合が起きる可能性は無くせない。
そのため、整合性を保つという観点ではいざ不整合が起きた時にエンドユーザ自身で不整合に対処できる手段を提供しておけると良い。
例えば、特定の業務に関して基本的にはシステムで自動実行するのだが、なんらかの原因で不整合が起きた際に手入力で補正できるようにしておく、といったイメージである。
不整合を自分自身で解消できる手段を与えることで、エンドユーザはより安心してサービスを利用できる。

## ドメインを深く理解し、エンドユーザを自分に憑依させる

エンドユーザが置かれている環境を理解し彼ら彼女らを自分に憑依させてプロダクトを眺めることはどの開発現場でも重要である。

プロダクト開発者が素早く正確に意思決定を下すために、エンドユーザの感覚を自分自身に内在化させよう。

エンタープライズ向けの業務アプリケーションにおいてはプロダクト開発者が対象ドメインに馴染みがないことが多い。だからこそよりリソースを割いてドメイン理解、ユーザ理解に勤める必要がある。

ユーザである彼ら彼女らが有している資格をとってみたり、実際に業務をこなしているところを横で見させてもらうことは有効な手段である。

エンタープライズ相手であっても現場に行きたいと打診すれば快く案内してくれることが多い。現場に行こう。

## 終わりに。エコシステム志向であれ

日本のSaaSは相互運用性(Public APIやWebhook、プラグイン機構など)を提供できていないものが多く、私は残念に感じている。

相互運用性を提供しない背景としてあらゆるデータを扱えるように自分たちのデータ基盤を拡大していけばいいという考えや自分たちのサービスにデータをロックインして離反を防ぎたいという傲慢な考えがあるように思う。
しかし、どこまでいっても顧客の業務を一つのデータ基盤で担うのは無理である。
論理的に考えて各サービスの役割はどこかの範囲では区切られるので必ず外部との接続は必要である。

相互運用性を提供しないことはSaaSベンダにとって百利あっても顧客には一利もない。

そして、相互運用性を提供することによって開発者エコシステムを発達させ事業成長を加速させたサービスの例はグローバルで見れば枚挙にいとまがない(Shopify, Stripe, Salesforce...)。
また、相互運用可能な仕組みを提供することは先に述べた不自然な要件や自己矛盾に対する一つの解ともなりうる。

統合データ基盤という野望やデータロックインという傲慢な考えを持っていては、素晴らしいプロダクトにならないと私は信じている。
そこはベンダとしての都合を持ち込むのではなく、より多くの顧客にとって本質的な課題解決を提供できるように相互運用性を提供するようになってほしいと願っている。
